!function(a,f,h,c){"use strict";var e="treeview",d={},b,g;d.settings={injectStyle:!0,levels:2,expandIcon:"glyphicon glyphicon-plus",collapseIcon:"glyphicon glyphicon-minus",emptyIcon:"glyphicon",nodeIcon:"",selectedIcon:"",checkedIcon:"glyphicon glyphicon-check",uncheckedIcon:"glyphicon glyphicon-unchecked",color:c,backColor:c,borderColor:c,onhoverColor:"#F5F5F5",selectedColor:"#FFFFFF",selectedBackColor:"#428bca",searchResultColor:"#D9534F",searchResultBackColor:c,enableLinks:!1,highlightSelected:!0,highlightSearchResults:!0,showBorder:!0,showIcon:!0,showCheckbox:!1,showTags:!1,multiSelect:!1,onNodeChecked:c,onNodeCollapsed:c,onNodeDisabled:c,onNodeEnabled:c,onNodeExpanded:c,onNodeSelected:c,onNodeUnchecked:c,onNodeUnselected:c,onSearchComplete:c,onSearchCleared:c},d.options={silent:!1,ignoreChildren:!1},d.searchOptions={ignoreCase:!0,exactMatch:!1,revealResults:!0},b=function(b,c){return this.$element=a(b),this.elementId=b.id,this.styleId=this.elementId+"-style",this.init(c),{options:this.options,init:a.proxy(this.init,this),remove:a.proxy(this.remove,this),getNode:a.proxy(this.getNode,this),getParent:a.proxy(this.getParent,this),getSiblings:a.proxy(this.getSiblings,this),getSelected:a.proxy(this.getSelected,this),getUnselected:a.proxy(this.getUnselected,this),getExpanded:a.proxy(this.getExpanded,this),getCollapsed:a.proxy(this.getCollapsed,this),getChecked:a.proxy(this.getChecked,this),getUnchecked:a.proxy(this.getUnchecked,this),getDisabled:a.proxy(this.getDisabled,this),getEnabled:a.proxy(this.getEnabled,this),selectNode:a.proxy(this.selectNode,this),unselectNode:a.proxy(this.unselectNode,this),toggleNodeSelected:a.proxy(this.toggleNodeSelected,this),collapseAll:a.proxy(this.collapseAll,this),collapseNode:a.proxy(this.collapseNode,this),expandAll:a.proxy(this.expandAll,this),expandNode:a.proxy(this.expandNode,this),toggleNodeExpanded:a.proxy(this.toggleNodeExpanded,this),revealNode:a.proxy(this.revealNode,this),checkAll:a.proxy(this.checkAll,this),checkNode:a.proxy(this.checkNode,this),uncheckAll:a.proxy(this.uncheckAll,this),uncheckNode:a.proxy(this.uncheckNode,this),toggleNodeChecked:a.proxy(this.toggleNodeChecked,this),disableAll:a.proxy(this.disableAll,this),disableNode:a.proxy(this.disableNode,this),enableAll:a.proxy(this.enableAll,this),enableNode:a.proxy(this.enableNode,this),toggleNodeDisabled:a.proxy(this.toggleNodeDisabled,this),search:a.proxy(this.search,this),clearSearch:a.proxy(this.clearSearch,this)}},b.prototype.init=function(b){this.tree=[],this.nodes=[],b.data&&("string"==typeof b.data&&(b.data=a.parseJSON(b.data)),this.tree=a.extend(!0,[],b.data),delete b.data),this.options=a.extend({},d.settings,b),this.destroy(),this.subscribeEvents(),this.setInitialStates({nodes:this.tree},0),this.render()},b.prototype.remove=function(){this.destroy(),a.removeData(this,e),a("#"+this.styleId).remove()},b.prototype.destroy=function(){this.initialized&&(this.$wrapper.remove(),this.$wrapper=null,this.unsubscribeEvents(),this.initialized=!1)},b.prototype.unsubscribeEvents=function(){this.$element.off("click"),this.$element.off("nodeChecked"),this.$element.off("nodeCollapsed"),this.$element.off("nodeDisabled"),this.$element.off("nodeEnabled"),this.$element.off("nodeExpanded"),this.$element.off("nodeSelected"),this.$element.off("nodeUnchecked"),this.$element.off("nodeUnselected"),this.$element.off("searchComplete"),this.$element.off("searchCleared")},b.prototype.subscribeEvents=function(){this.unsubscribeEvents(),this.$element.on("click",a.proxy(this.clickHandler,this)),"function"==typeof this.options.onNodeChecked&&this.$element.on("nodeChecked",this.options.onNodeChecked),"function"==typeof this.options.onNodeCollapsed&&this.$element.on("nodeCollapsed",this.options.onNodeCollapsed),"function"==typeof this.options.onNodeDisabled&&this.$element.on("nodeDisabled",this.options.onNodeDisabled),"function"==typeof this.options.onNodeEnabled&&this.$element.on("nodeEnabled",this.options.onNodeEnabled),"function"==typeof this.options.onNodeExpanded&&this.$element.on("nodeExpanded",this.options.onNodeExpanded),"function"==typeof this.options.onNodeSelected&&this.$element.on("nodeSelected",this.options.onNodeSelected),"function"==typeof this.options.onNodeUnchecked&&this.$element.on("nodeUnchecked",this.options.onNodeUnchecked),"function"==typeof this.options.onNodeUnselected&&this.$element.on("nodeUnselected",this.options.onNodeUnselected),"function"==typeof this.options.onSearchComplete&&this.$element.on("searchComplete",this.options.onSearchComplete),"function"==typeof this.options.onSearchCleared&&this.$element.on("searchCleared",this.options.onSearchCleared)},b.prototype.setInitialStates=function(c,d){if(c.nodes){d+=1;var e=c,b=this;a.each(c.nodes,function(c,a){a.nodeId=b.nodes.length,a.parentId=e.nodeId,a.hasOwnProperty("selectable")||(a.selectable=!0),a.state=a.state||{},a.state.hasOwnProperty("checked")||(a.state.checked=!1),a.state.hasOwnProperty("disabled")||(a.state.disabled=!1),a.state.hasOwnProperty("expanded")||(!a.state.disabled&&d<b.options.levels&&a.nodes&&a.nodes.length>0?a.state.expanded=!0:a.state.expanded=!1),a.state.hasOwnProperty("selected")||(a.state.selected=!1),b.nodes.push(a),a.nodes&&b.setInitialStates(a,d)})}},b.prototype.clickHandler=function(f){var c,b,e;this.options.enableLinks||f.preventDefault(),c=a(f.target),b=this.findNode(c),b&&!b.state.disabled&&(e=c.attr("class")?c.attr("class").split(" "):[],-1!==e.indexOf("expand-icon")?(this.toggleExpandedState(b,d.options),this.render()):-1!==e.indexOf("check-icon")?(this.toggleCheckedState(b,d.options),this.render()):(b.selectable?this.toggleSelectedState(b,d.options):this.toggleExpandedState(b,d.options),this.render()))},b.prototype.findNode=function(b){var c=b.closest("li.list-group-item").attr("data-nodeid"),a=this.nodes[c];return a||console.log("Error: node does not exist"),a},b.prototype.toggleExpandedState=function(a,b){a&&this.setExpandedState(a,!a.state.expanded,b)},b.prototype.setExpandedState=function(b,d,c){d!==b.state.expanded&&(d&&b.nodes?(b.state.expanded=!0,c.silent||this.$element.trigger("nodeExpanded",a.extend(!0,{},b))):d||(b.state.expanded=!1,c.silent||this.$element.trigger("nodeCollapsed",a.extend(!0,{},b)),b.nodes&&!c.ignoreChildren&&a.each(b.nodes,a.proxy(function(b,a){this.setExpandedState(a,!1,c)},this))))},b.prototype.toggleSelectedState=function(a,b){a&&this.setSelectedState(a,!a.state.selected,b)},b.prototype.setSelectedState=function(b,d,c){d!==b.state.selected&&(d?(this.options.multiSelect||a.each(this.findNodes("true","g","state.selected"),a.proxy(function(b,a){this.setSelectedState(a,!1,c)},this)),b.state.selected=!0,c.silent||this.$element.trigger("nodeSelected",a.extend(!0,{},b))):(b.state.selected=!1,c.silent||this.$element.trigger("nodeUnselected",a.extend(!0,{},b))))},b.prototype.toggleCheckedState=function(a,b){a&&this.setCheckedState(a,!a.state.checked,b)},b.prototype.setCheckedState=function(b,c,d){c!==b.state.checked&&(c?(b.state.checked=!0,d.silent||this.$element.trigger("nodeChecked",a.extend(!0,{},b))):(b.state.checked=!1,d.silent||this.$element.trigger("nodeUnchecked",a.extend(!0,{},b))))},b.prototype.setDisabledState=function(b,d,c){d!==b.state.disabled&&(d?(b.state.disabled=!0,this.setExpandedState(b,!1,c),this.setSelectedState(b,!1,c),this.setCheckedState(b,!1,c),c.silent||this.$element.trigger("nodeDisabled",a.extend(!0,{},b))):(b.state.disabled=!1,c.silent||this.$element.trigger("nodeEnabled",a.extend(!0,{},b))))},b.prototype.render=function(){this.initialized||(this.$element.addClass(e),this.$wrapper=a(this.template.list),this.injectStyle(),this.initialized=!0),this.$element.empty().append(this.$wrapper.empty()),this.buildTree(this.tree,0)},b.prototype.buildTree=function(d,c){if(d){c+=1;var b=this;a.each(d,function(h,d){for(var f=a(b.template.item).addClass("node-"+b.elementId).addClass(d.state.checked?"node-checked":"").addClass(d.state.disabled?"node-disabled":"").addClass(d.state.selected?"node-selected":"").addClass(d.searchResult?"search-result":"").attr("data-nodeid",d.nodeId).attr("style",b.buildStyleOverride(d)),g=0,e;c-1>g;g++)f.append(b.template.indent);return e=[],(d.nodes?(e.push("expand-icon"),e.push(d.state.expanded?b.options.collapseIcon:b.options.expandIcon)):e.push(b.options.emptyIcon),f.append(a(b.template.icon).addClass(e.join(" "))),b.options.showIcon)&&(e=["node-icon"],e.push(d.icon||b.options.nodeIcon),d.state.selected&&(e.pop(),e.push(d.selectedIcon||b.options.selectedIcon||d.icon||b.options.nodeIcon)),f.append(a(b.template.icon).addClass(e.join(" ")))),b.options.showCheckbox&&(e=["check-icon"],e.push(d.state.checked?b.options.checkedIcon:b.options.uncheckedIcon),f.append(a(b.template.icon).addClass(e.join(" ")))),f.append(b.options.enableLinks?a(b.template.link).attr("href",d.href).append(d.text):d.text),b.options.showTags&&d.tags&&a.each(d.tags,function(d,c){f.append(a(b.template.badge).append(c))}),b.$wrapper.append(f),d.nodes&&d.state.expanded&&!d.state.disabled?b.buildTree(d.nodes,c):void 0})}},b.prototype.buildStyleOverride=function(a){if(a.state.disabled)return"";var b=a.color,c=a.backColor;return this.options.highlightSelected&&a.state.selected&&(this.options.selectedColor&&(b=this.options.selectedColor),this.options.selectedBackColor&&(c=this.options.selectedBackColor)),this.options.highlightSearchResults&&a.searchResult&&!a.state.disabled&&(this.options.searchResultColor&&(b=this.options.searchResultColor),this.options.searchResultBackColor&&(c=this.options.searchResultBackColor)),"color:"+b+";background-color:"+c+";"},b.prototype.injectStyle=function(){this.options.injectStyle&&!h.getElementById(this.styleId)&&a('<style type="text/css" id="'+this.styleId+'"> '+this.buildStyle()+" </style>").appendTo("head")},b.prototype.buildStyle=function(){var a=".node-"+this.elementId+"{";return this.options.color&&(a+="color:"+this.options.color+";"),this.options.backColor&&(a+="background-color:"+this.options.backColor+";"),this.options.showBorder?this.options.borderColor&&(a+="border:1px solid "+this.options.borderColor+";"):a+="border:none;",a+="}",this.options.onhoverColor&&(a+=".node-"+this.elementId+":not(.node-disabled):hover{background-color:"+this.options.onhoverColor+";}"),this.css+a},b.prototype.template={list:'<ul class="list-group"></ul>',item:'<li class="list-group-item"></li>',indent:'<span class="indent"></span>',icon:'<span class="icon"></span>',link:'<a href="#" style="color:inherit;"></a>',badge:'<span class="badge"></span>'},b.prototype.css=".treeview .list-group-item{cursor:pointer}.treeview span.indent{margin-left:10px;margin-right:10px}.treeview span.icon{width:12px;margin-right:5px}.treeview .node-disabled{color:silver;cursor:not-allowed}",b.prototype.getNode=function(a){return this.nodes[a]},b.prototype.getParent=function(a){var b=this.identifyNode(a);return this.nodes[b.parentId]},b.prototype.getSiblings=function(c){var a=this.identifyNode(c),b=this.getParent(a),d=b?b.nodes:this.tree;return d.filter(function(b){return b.nodeId!==a.nodeId})},b.prototype.getSelected=function(){return this.findNodes("true","g","state.selected")},b.prototype.getUnselected=function(){return this.findNodes("false","g","state.selected")},b.prototype.getExpanded=function(){return this.findNodes("true","g","state.expanded")},b.prototype.getCollapsed=function(){return this.findNodes("false","g","state.expanded")},b.prototype.getChecked=function(){return this.findNodes("true","g","state.checked")},b.prototype.getUnchecked=function(){return this.findNodes("false","g","state.checked")},b.prototype.getDisabled=function(){return this.findNodes("true","g","state.disabled")},b.prototype.getEnabled=function(){return this.findNodes("false","g","state.disabled")},b.prototype.selectNode=function(b,c){this.forEachIdentifier(b,c,a.proxy(function(a,b){this.setSelectedState(a,!0,b)},this)),this.render()},b.prototype.unselectNode=function(b,c){this.forEachIdentifier(b,c,a.proxy(function(a,b){this.setSelectedState(a,!1,b)},this)),this.render()},b.prototype.toggleNodeSelected=function(b,c){this.forEachIdentifier(b,c,a.proxy(function(a,b){this.toggleSelectedState(a,b)},this)),this.render()},b.prototype.collapseAll=function(b){var c=this.findNodes("true","g","state.expanded");this.forEachIdentifier(c,b,a.proxy(function(a,b){this.setExpandedState(a,!1,b)},this)),this.render()},b.prototype.collapseNode=function(b,c){this.forEachIdentifier(b,c,a.proxy(function(a,b){this.setExpandedState(a,!1,b)},this)),this.render()},b.prototype.expandAll=function(b){if(b=a.extend({},d.options,b),b&&b.levels)this.expandLevels(this.tree,b.levels,b);else{var c=this.findNodes("false","g","state.expanded");this.forEachIdentifier(c,b,a.proxy(function(a,b){this.setExpandedState(a,!0,b)},this))}this.render()},b.prototype.expandNode=function(b,c){this.forEachIdentifier(b,c,a.proxy(function(b,a){this.setExpandedState(b,!0,a),b.nodes&&a&&a.levels&&this.expandLevels(b.nodes,a.levels-1,a)},this)),this.render()},b.prototype.expandLevels=function(e,c,b){b=a.extend({},d.options,b),a.each(e,a.proxy(function(d,a){this.setExpandedState(a,c>0,b),a.nodes&&this.expandLevels(a.nodes,c-1,b)},this))},b.prototype.revealNode=function(b,c){this.forEachIdentifier(b,c,a.proxy(function(b,c){for(var a=this.getParent(b);a;)this.setExpandedState(a,!0,c),a=this.getParent(a)},this)),this.render()},b.prototype.toggleNodeExpanded=function(b,c){this.forEachIdentifier(b,c,a.proxy(function(a,b){this.toggleExpandedState(a,b)},this)),this.render()},b.prototype.checkAll=function(b){var c=this.findNodes("false","g","state.checked");this.forEachIdentifier(c,b,a.proxy(function(a,b){this.setCheckedState(a,!0,b)},this)),this.render()},b.prototype.checkNode=function(b,c){this.forEachIdentifier(b,c,a.proxy(function(a,b){this.setCheckedState(a,!0,b)},this)),this.render()},b.prototype.uncheckAll=function(b){var c=this.findNodes("true","g","state.checked");this.forEachIdentifier(c,b,a.proxy(function(a,b){this.setCheckedState(a,!1,b)},this)),this.render()},b.prototype.uncheckNode=function(b,c){this.forEachIdentifier(b,c,a.proxy(function(a,b){this.setCheckedState(a,!1,b)},this)),this.render()},b.prototype.toggleNodeChecked=function(b,c){this.forEachIdentifier(b,c,a.proxy(function(a,b){this.toggleCheckedState(a,b)},this)),this.render()},b.prototype.disableAll=function(b){var c=this.findNodes("false","g","state.disabled");this.forEachIdentifier(c,b,a.proxy(function(a,b){this.setDisabledState(a,!0,b)},this)),this.render()},b.prototype.disableNode=function(b,c){this.forEachIdentifier(b,c,a.proxy(function(a,b){this.setDisabledState(a,!0,b)},this)),this.render()},b.prototype.enableAll=function(b){var c=this.findNodes("true","g","state.disabled");this.forEachIdentifier(c,b,a.proxy(function(a,b){this.setDisabledState(a,!1,b)},this)),this.render()},b.prototype.enableNode=function(b,c){this.forEachIdentifier(b,c,a.proxy(function(a,b){this.setDisabledState(a,!1,b)},this)),this.render()},b.prototype.toggleNodeDisabled=function(b,c){this.forEachIdentifier(b,c,a.proxy(function(a,b){this.setDisabledState(a,!a.state.disabled,b)},this)),this.render()},b.prototype.forEachIdentifier=function(b,c,e){c=a.extend({},d.options,c),b instanceof Array||(b=[b]),a.each(b,a.proxy(function(b,a){e(this.identifyNode(a),c)},this))},b.prototype.identifyNode=function(a){return"number"==typeof a?this.nodes[a]:a},b.prototype.search=function(c,e){var b,f;return e=a.extend({},d.searchOptions,e),this.clearSearch({render:!1}),b=[],c&&c.length>0&&(e.exactMatch&&(c="^"+c+"$"),f="g",e.ignoreCase&&(f+="i"),b=this.findNodes(c,f),a.each(b,function(b,a){a.searchResult=!0})),e.revealResults?this.revealNode(b):this.render(),this.$element.trigger("searchComplete",a.extend(!0,{},b)),b},b.prototype.clearSearch=function(b){b=a.extend({},{render:!0},b);var c=a.each(this.findNodes("true","g","searchResult"),function(b,a){a.searchResult=!1});b.render&&this.render(),this.$element.trigger("searchCleared",a.extend(!0,{},c))},b.prototype.findNodes=function(d,b,c){b=b||"g",c=c||"text";var e=this;return a.grep(this.nodes,function(f){var a=e.getNodeValue(f,c);return"string"==typeof a?a.match(new RegExp(d,b)):void 0})},b.prototype.getNodeValue=function(b,a){var d=a.indexOf("."),e,f;return d>0?(e=b[a.substring(0,d)],f=a.substring(d+1,a.length),this.getNodeValue(e,f)):b.hasOwnProperty(a)?b[a].toString():c},g=function(a){f.console&&f.console.error(a)},a.fn[e]=function(c,d){var f;return this.each(function(){var h=a.data(this,e);"string"==typeof c?h?a.isFunction(h[c])&&"_"!==c.charAt(0)?(d instanceof Array||(d=[d]),f=h[c].apply(h,d)):g("No such method : "+c):g("Not initialized, can not call method : "+c):"boolean"==typeof c?f=h:a.data(this,e,new b(this,a.extend(!0,{},c)))}),f||this}}(jQuery,window,document)